#! /usr/bin/env python3

import argparse
import sys
import json

parser = argparse.ArgumentParser(description="Create byte-wise n-gram distribution",)
parser.add_argument('-n', default=1, help="Size of n-grams")
parser.add_argument('-o', '--output', default=None, help="File to write output to")
parser.add_argument('input', help="The file to be n-gram analyzed")

args = parser.parse_args()

file_name = args.input
n = int(args.n)
output = args.output

distribution = dict()

with open(file_name, "rb") as f:
    f.seek(0,2)
    end = f.tell()
    f.seek(0)
    bytes = f.read(n)
    while f.tell() != end:
        distribution[bytes] = distribution.get(bytes, 0) + 1
        f.seek(1-n, 1)
        bytes = f.read(n)

print(distribution)
#if output is None:
    #print(json.dumps(distribution))
#else:
    #json.dump(distribution, open(output, "w"))
